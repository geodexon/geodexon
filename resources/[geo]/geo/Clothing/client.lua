Male = {'a_m_m_acult_01','a_m_m_afriamer_01','a_m_m_beach_01','a_m_m_beach_02','a_m_m_bevhills_01','a_m_m_bevhills_02','a_m_m_business_01','a_m_m_eastsa_01','a_m_m_eastsa_02','a_m_m_farmer_01','a_m_m_fatlatin_01','a_m_m_genfat_01','a_m_m_genfat_02','a_m_m_golfer_01','a_m_m_hasjew_01','a_m_m_hillbilly_01','a_m_m_hillbilly_02','a_m_m_indian_01','a_m_m_ktown_01','a_m_m_malibu_01','a_m_m_mexcntry_01','a_m_m_mexlabor_01','a_m_m_og_boss_01','a_m_m_paparazzi_01','a_m_m_polynesian_01','a_m_m_prolhost_01','a_m_m_rurmeth_01','a_m_m_salton_01','a_m_m_salton_02','a_m_m_salton_03','a_m_m_salton_04','a_m_m_skater_01','a_m_m_skidrow_01','a_m_m_socenlat_01','a_m_m_soucent_01','a_m_m_soucent_02','a_m_m_soucent_03','a_m_m_soucent_04','a_m_m_stlat_02','a_m_m_tennis_01','a_m_m_tourist_01','a_m_m_trampbeac_01','a_m_m_tramp_01','a_m_m_tranvest_01','a_m_m_tranvest_02','a_m_o_acult_01','a_m_o_acult_02','a_m_o_beach_01','a_m_o_genstreet_01','a_m_o_ktown_01','a_m_o_salton_01','a_m_o_soucent_01','a_m_o_soucent_02','a_m_o_soucent_03','a_m_o_tramp_01','a_m_y_acult_01','a_m_y_acult_02','a_m_y_beachvesp_01','a_m_y_beachvesp_02','a_m_y_beach_01','a_m_y_beach_02','a_m_y_beach_03','a_m_y_bevhills_01','a_m_y_bevhills_02','a_m_y_breakdance_01','a_m_y_busicas_01','a_m_y_business_01','a_m_y_business_02','a_m_y_business_03','a_m_y_cyclist_01','a_m_y_dhill_01','a_m_y_downtown_01','a_m_y_eastsa_01','a_m_y_eastsa_02','a_m_y_epsilon_01','a_m_y_epsilon_02','a_m_y_gay_01','a_m_y_gay_02','a_m_y_genstreet_01','a_m_y_genstreet_02','a_m_y_golfer_01','a_m_y_hasjew_01','a_m_y_hiker_01','a_m_y_hippy_01','a_m_y_hipster_01','a_m_y_hipster_02','a_m_y_hipster_03','a_m_y_indian_01','a_m_y_jetski_01','a_m_y_juggalo_01','a_m_y_ktown_01','a_m_y_ktown_02','a_m_y_latino_01','a_m_y_methhead_01','a_m_y_mexthug_01','a_m_y_motox_01','a_m_y_motox_02','a_m_y_musclbeac_01','a_m_y_musclbeac_02','a_m_y_polynesian_01','a_m_y_roadcyc_01','a_m_y_runner_01','a_m_y_runner_02','a_m_y_salton_01','a_m_y_skater_01','a_m_y_skater_02','a_m_y_soucent_01','a_m_y_soucent_02','a_m_y_soucent_03','a_m_y_soucent_04','a_m_y_stbla_01','a_m_y_stbla_02','a_m_y_stlat_01','a_m_y_stwhi_01','a_m_y_stwhi_02','a_m_y_sunbathe_01','a_m_y_surfer_01','a_m_y_vindouche_01','a_m_y_vinewood_01','a_m_y_vinewood_02','a_m_y_vinewood_03','a_m_y_vinewood_04','a_m_y_yoga_01','csb_anton','csb_ballasog','csb_burgerdrug','csb_car3guy1','csb_car3guy2','csb_chef','csb_chin_goon','csb_cletus', 'csb_customer', 'csb_fos_rep', 'csb_g', 'csb_groom', 'csb_grove_str_dlr', 'csb_hao', 'csb_hugh', 'csb_imran', 'csb_janitor', 'csb_ortega', 'csb_oscar', 'csb_porndudes', 'csb_prologuedriver', 'csb_ramp_gang',  'csb_ramp_hic', 'csb_ramp_hipster', 'csb_ramp_mex', 'csb_reporter', 'csb_roccopelosi', 'csb_trafficwarden','cs_bankman', 'cs_barry', 'cs_beverly', 'cs_brad', 'cs_carbuyer', 'cs_chengsr', 'cs_chrisformage', 'cs_clay', 'cs_dale', 'cs_davenorton', 'cs_devin', 'cs_dom', 'cs_dreyfuss', 'cs_drfriedlander', 'cs_fabien', 'cs_floyd', 'cs_hunter', 'cs_jimmyboston', 'cs_jimmydisanto', 'cs_joeminuteman', 'cs_johnnyklebitz', 'cs_josef', 'cs_josh', 'cs_lazlow', 'cs_lestercrest', 'cs_lifeinvad_01', 'cs_manuel', 'cs_martinmadrazo', 'cs_milton', 'cs_movpremmale', 'cs_mrk', 'cs_nervousron', 'cs_nigel', 'cs_old_man1a', 'cs_old_man2', 'cs_omega', 'cs_orleans', 'cs_paper', 'cs_priest', 'cs_prolsec_02', 'cs_russiandrunk', 'cs_siemonyetarian', 'cs_solomon', 'cs_stevehains', 'cs_stretch', 'cs_taocheng', 'cs_taostranslator', 'cs_tenniscoach', 'cs_terry', 'cs_tom', 'cs_tomepsilon', 'cs_wade', 'cs_zimbor', 'g_m_m_armboss_01','g_m_m_armgoon_01','g_m_m_armlieut_01','g_m_m_chemwork_01','g_m_m_chiboss_01','g_m_m_chicold_01','g_m_m_chigoon_01','g_m_m_chigoon_02','g_m_m_korboss_01','g_m_m_mexboss_01','g_m_m_mexboss_02','g_m_y_armgoon_02','g_m_y_azteca_01','g_m_y_ballaeast_01','g_m_y_ballaorig_01','g_m_y_ballasout_01','g_m_y_famca_01','g_m_y_famdnf_01','g_m_y_famfor_01','g_m_y_korean_01','g_m_y_korean_02','g_m_y_korlieut_01','g_m_y_lost_01','g_m_y_lost_02','g_m_y_lost_03','g_m_y_mexgang_01','g_m_y_mexgoon_01','g_m_y_mexgoon_02','g_m_y_mexgoon_03','g_m_y_pologoon_01','g_m_y_pologoon_02','g_m_y_salvaboss_01','g_m_y_salvagoon_01','g_m_y_salvagoon_02','g_m_y_salvagoon_03','g_m_y_strpunk_01','g_m_y_strpunk_02','hc_driver', 'hc_gunman', 'hc_hacker', 's_m_m_ammucountry','s_m_m_autoshop_01','s_m_m_autoshop_02','s_m_m_bouncer_01','s_m_m_ciasec_01','s_m_m_cntrybar_01','s_m_m_dockwork_01','s_m_m_doctor_01','s_m_m_fiboffice_02','s_m_m_gaffer_01','s_m_m_gardener_01','s_m_m_gentransport','s_m_m_hairdress_01','s_m_m_highsec_01','s_m_m_highsec_02','s_m_m_janitor','s_m_m_lathandy_01','s_m_m_lifeinvad_01','s_m_m_linecook','s_m_m_lsmetro_01','s_m_m_mariachi_01','s_m_m_migrant_01','s_m_m_movprem_01','s_m_m_movspace_01','s_m_m_pilot_01','s_m_m_pilot_02','s_m_m_postal_01','s_m_m_postal_02','s_m_m_scientist_01','s_m_m_strperf_01','s_m_m_strpreach_01','s_m_m_strvend_01','s_m_m_trucker_01','s_m_m_ups_01','s_m_m_ups_02','s_m_o_busker_01','s_m_y_airworker','s_m_y_ammucity_01','s_m_y_armymech_01','s_m_y_autopsy_01','s_m_y_barman_01','s_m_y_baywatch_01','s_m_y_busboy_01','s_m_y_chef_01','s_m_y_clown_01','s_m_y_construct_01','s_m_y_construct_02','s_m_y_dealer_01','s_m_y_devinsec_01','s_m_y_dockwork_01','s_m_y_dwservice_01','s_m_y_dwservice_02','s_m_y_factory_01','s_m_y_garbage','s_m_y_grip_01','s_m_y_mime','s_m_y_pestcont_01','s_m_y_pilot_01','s_m_y_prismuscl_01','s_m_y_prisoner_01','s_m_y_robber_01','s_m_y_shop_mask','s_m_y_strvend_01','s_m_y_uscg_01','s_m_y_valet_01','s_m_y_waiter_01','s_m_y_winclean_01','s_m_y_xmech_01','s_m_y_xmech_02','u_m_m_aldinapoli','u_m_m_bankman','u_m_m_bikehire_01','u_m_m_fibarchitect','u_m_m_filmdirector','u_m_m_glenstank_01','u_m_m_griff_01','u_m_m_jesus_01','u_m_m_jewelsec_01','u_m_m_jewelthief','u_m_m_markfost','u_m_m_partytarget','u_m_m_promourn_01','u_m_m_rivalpap','u_m_m_spyactor','u_m_m_willyfist','u_m_o_finguru_01','u_m_o_taphillbilly','u_m_o_tramp_01','u_m_y_abner','u_m_y_antonb','u_m_y_babyd','u_m_y_baygor','u_m_y_burgerdrug_01','u_m_y_chip','u_m_y_cyclist_01','u_m_y_fibmugger_01','u_m_y_guido_01','u_m_y_gunvend_01','u_m_y_hippie_01','u_m_y_imporage','u_m_y_justin','u_m_y_mani','u_m_y_militarybum','u_m_y_paparazzi','u_m_y_party_01','u_m_y_pogo_01','u_m_y_prisoner_01','u_m_y_proldriver_01','u_m_y_rsranger_01','u_m_y_sbike','u_m_y_staggrm_01','u_m_y_tattoo_01'}
Female = {'a_f_m_beach_01','a_f_m_bevhills_01','a_f_m_bevhills_02','a_f_m_bodybuild_01','a_f_m_business_02','a_f_m_downtown_01','a_f_m_eastsa_01','a_f_m_eastsa_02','a_f_m_fatbla_01','a_f_m_fatcult_01','a_f_m_fatwhite_01','a_f_m_ktown_01','a_f_m_ktown_02','a_f_m_prolhost_01','a_f_m_salton_01','a_f_m_skidrow_01','a_f_m_soucentmc_01','a_f_m_soucent_01','a_f_m_soucent_02','a_f_m_tourist_01','a_f_m_trampbeac_01','a_f_m_tramp_01','a_f_o_genstreet_01','a_f_o_indian_01','a_f_o_ktown_01','a_f_o_salton_01','a_f_o_soucent_01','a_f_o_soucent_02','a_f_y_beach_01','a_f_y_bevhills_01','a_f_y_bevhills_02','a_f_y_bevhills_03','a_f_y_bevhills_04','a_f_y_business_01','a_f_y_business_02','a_f_y_business_03','a_f_y_business_04','a_f_y_eastsa_01','a_f_y_eastsa_02','a_f_y_eastsa_03','a_f_y_epsilon_01','a_f_y_fitness_01','a_f_y_fitness_02','a_f_y_genhot_01','a_f_y_golfer_01','a_f_y_hiker_01','a_f_y_hippie_01','a_f_y_hipster_01','a_f_y_hipster_02','a_f_y_hipster_03','a_f_y_hipster_04','a_f_y_indian_01','a_f_y_juggalo_01','a_f_y_runner_01','a_f_y_rurmeth_01','a_f_y_scdressy_01','a_f_y_skater_01','a_f_y_soucent_01','a_f_y_soucent_02','a_f_y_soucent_03','a_f_y_tennis_01','a_f_y_topless_01','a_f_y_tourist_01','a_f_y_tourist_02','a_f_y_vinewood_01','a_f_y_vinewood_02','a_f_y_vinewood_03','a_f_y_vinewood_04','a_f_y_yoga_01','cs_tracydisanto','cs_tanisha', 'cs_patricia', 'cs_mrsphillips', 'cs_mrs_thornhill', 'cs_natalia', 'cs_molly', 'cs_movpremf_01', 'cs_maryann', 'cs_michelle', 'cs_marnie', 'cs_magenta', 'cs_janet', 'cs_jewelass', 'cs_guadalope', 'cs_gurk',  'cs_debra', 'cs_denise', 'cs_amandatownley',  'cs_ashley', 'csb_screen_writer', 'csb_stripper_01', 'csb_stripper_02', 'csb_tonya', 'csb_maude', 'csb_denise_friend', 'csb_abigail', 'csb_anita', 'g_f_y_ballas_01','g_f_y_families_01','g_f_y_lost_01','g_f_y_vagos_01','s_f_m_fembarber','s_f_m_maid_01','s_f_m_shop_high','s_f_m_sweatshop_01','s_f_y_airhostess_01','s_f_y_bartender_01','s_f_y_baywatch_01','s_f_y_factory_01','s_f_y_hooker_01','s_f_y_hooker_02','s_f_y_hooker_03','s_f_y_migrant_01','s_f_y_movprem_01','s_f_y_shop_low','s_f_y_shop_mid','s_f_y_stripperlite','s_f_y_stripper_01','s_f_y_stripper_02','s_f_y_sweatshop_01','u_f_m_corpse_01','u_f_m_miranda','u_f_m_promourn_01','u_f_o_moviestar','u_f_o_prolhost_01','u_f_y_bikerchic','u_f_y_comjane','u_f_y_hotposh_01','u_f_y_jewelass_01','u_f_y_mistress','u_f_y_poppymich','u_f_y_princess','u_f_y_spyactress'}
MP = {'mp_f_deadhooker','mp_f_misty_01','mp_f_stripperlite','mp_g_m_pros_01','mp_m_claude_01','mp_m_exarmy_01','mp_m_famdd_01','mp_m_fibsec_01','mp_m_marston_01','mp_m_niko_01','mp_m_shopkeep_01','mp_s_m_armoured_01'}
Freemode = {'mp_m_freemode_01','mp_f_freemode_01'}

List = {}
List['Male'] = Male
List['Female'] = Female
List['MP'] = MP
List['Freemode'] = Freemode
local male = GetHashKey('mp_m_freemode_01')
local female = GetHashKey('mp_f_freemode_01')

local DrawableClothes = {}
local TextureClothes = {}
local PalleteClothes = {}
local FaceFeature = {}

local DrawableProp = {}
local TextureProp = {}

local HeadOverlayDraw = {}
local HeadOverlayTexture = {}
local HeadOverlayOpacity = {}

local hairColor = 0
local hairHighlight = 0

local eyeColor = 0

local propNames = {'Glass', 'Ear', nil, nil, nil, 'Watch', 'Bracelt'}
propNames[0] = 'Hat'

local clothingNames = {[0] = 'Face', 'Mask', 'Hair', 'Torso', 'Leg', 'Parachute', 'Shoes', 'Accessories', 'Undershirt', 'Armor', 'Badge', 'Torso 2'}
local featureNames = {'Nose Width', 'Nose Peak Height', 'Nose Peak Length', 'Nose Bone High', 'Nose Peak Lowering', 'Nose Bone Twist', 'Eyebrow High', 'Eyebrow Forward', 'Cheek Bone High', 'Cheeck Bone Width', 'Cheeks Width', 'Eye Opening', 'Lip Thickness', 'Jaw Bone Width', 'Jaw Bone Back Length', 'Chimp Bone Lowering', 'Chimp Bone Length', 'Chimp Bone Width', 'Chimp Hole', 'Neck Thickness'}
local overlayNames = {'Blemishes', 'Facial Hair', 'Eyebrows', 'Age', 'Makeup', 'Blush', 'Complexion', 'Sun Damage', 'Lipstick', 'Moles', 'Chest Hair', 'Body Blemishes', 'Body Blemishes'}
local hasColors = {[1] = 1, [2] = 1, [5] = 2, [8] = 2, [10] = 1}

Menu.CreateMenu('Clothing', 'Customization')
Menu.CreateSubMenu('Outfits', 'Clothing', 'Outfits')

local clothingStores = {
    vector3(424.84, -806.35, 29.49),
    vector3(75.73, -1393.07, 29.38),
    vector3(-162.98, -303.31, 39.73),
    vector3(-167.14, -300.1, 39.73),
    vector3(-1192.85, -768.69, 17.32),
    vector3(4.48, 6512.7, 31.88),
    vector3(1196.58, 2709.67, 38.22),
    vector3(-1101.15, 2710.37, 19.11),
    vector3(125.48, -222.82, 54.56),
    vector3(1693.31, 4822.22, 42.06),
    vector3(-1451.1, -237.05, 49.81),
    vector3(608.28, 2743.13, 41.99),
    vector3(-818.93, -1075.31, 11.33),
    vector3(-710.21, -153.36, 37.42),
    vector3(-3170.68, 1044.02, 20.86)
}


Citizen.CreateThread(function()
    --RegisterProximityMenu('Clothing Store', {Name = 'Clothing [$50]', pos = clothingStores, func = ClothingStore, range = 50.0})
    for k,v in pairs(clothingStores) do
        local blip = AddBlipForCoord(v)
        SetBlipSprite(blip, 73)
		SetBlipAsShortRange(blip, true)
		SetBlipScale(blip, 0.8)
		BeginTextCommandSetBlipName("STRING");
		AddTextComponentString('Clothing Store')
		EndTextCommandSetBlipName(blip)
    end
end)

local nTime = GetGameTimer()
local thisProm
function ClothingStore()
    if IsNearLocation(clothingStores, GetEntityCoords(Shared.Ped), 10.0) then
        if Shared.TimeSince(nTime) > 500 then
            nTime = GetGameTimer()
            thisProm = promise:new()
            TriggerServerEvent('ClothingStore', promise)
            return Citizen.Await(thisProm)
        end
    end
end

RegisterNetEvent('ClothingStore')
AddEventHandler('ClothingStore', function(bool)
    if not bool then
        thisProm:resolve(false)
        TriggerEvent('Shared.Notif', 'You can not afford this')
        return
    end

    local closest
    local dist = 99999999999.0
    local ped = PlayerPedId()
    local pos = GetEntityCoords(ped)

    for k,v in pairs(clothingStores) do
        if Vdist4(pos, v) < dist then
            dist = Vdist4(pos, v)
            closest = k
        end
    end

    ClothingMenu(closest)
    thisProm:resolve(false)
end)

local outfits = {}
RegisterNetEvent('Clothing.GetOutfits')
AddEventHandler('Clothing.GetOutfits', function(out)
    local val = {}
    for k,v in pairs(out) do
        val[k] = json.decode(v.clothing)
        val[k].ID = v.outfit
    end

    outfits = val
end)

local clothingTypeSlider = 1

function ClothingMenu(closest)

    exports['geo-interface']:ClothingMenu()
    --[[ local ped = PlayerPedId()

    local sInd = {}
    local isNew = false
    local MyClothing = New((MyCharacter or {}).clothing)
    if MyClothing == nil or MyClothing == '{}' then
        isNew = true
    else
        outfits = {}
        TriggerServerEvent('Clothing.GetOutfits')
    end
    local blend = {}

    if FreemodePed(ped) then
        local val = exports['hbw']:GetHeadBlendData(PlayerPedId())
        blend = {val.FirstFaceShape, val.SecondFaceShape, val.ThirdFaceShape, val.FirstSkinTone, val.SecondSkinTone, val.ThirdSkinTone, val.ParentFaceShapePercent, val.ParentSkinTonePercent, val.ParentThirdUnkPercent, val.IsParentInheritance}
        SetPedHeadBlendData(ped, blend[1], blend[2], blend[3], blend[4], blend[5], blend[6], blend[7], blend[8], blend[9], blend[10])
    end

    local oName = 'Unset'
    local oID
    if MyCharacter then
        oName, oID = json.decode(MyCharacter.clothing).Name, MyCharacter.clothing.ID
    end

    if MyCharacter then
        local clothing = json.decode(MyCharacter.clothing)
        LoadClothing(clothing)
        GetClothing(oName, oID)
    else
        LoadClothing(GetClothing(oName, oID))
    end

    Menu.Menus['Clothing'].SubTitle = 'Outfit: '..(oName or '')

    while Menu.CurrentMenu do
        Wait(0)
        ped = PlayerPedId()

        if closest then
            pos = GetEntityCoords(ped)
            if Vdist4(pos, clothingStores[closest]) > 100.0 then
                Menu.CloseMenu()
            end
        end

        if Menu.CurrentMenu == 'Clothing' then

            if MyCharacter then
                Menu.MenuButton('Outfits', 'Outfits')
            end

            local tbl = {'Clothing', 'Props'}
            if FreemodePed(ped) then
                if isNew then
                    tbl = {'Clothing', 'Props', 'Face' ,'Face Overlay'}
                else
                    tbl = {'Clothing', 'Props', 'Face Overlay'}
                end
            end

            Menu.Slider('Clothing Type', tbl, clothingTypeSlider, function(current)
                if current ~= clothingTypeSlider then
                    clothingTypeSlider = current
                end
            end, tbl[clothingTypeSlider] or 'null')

            if tbl[clothingTypeSlider] == 'Clothing' then
                for i=0,11 do
                    local max = GetNumberOfPedDrawableVariations(ped, i)
                    if max > 1 then

                        if i == 0 and  FreemodePed(ped) then
                            goto nextS
                        end

                        Menu.SliderStep(clothingNames[i], 0, max-1, 1, DrawableClothes[i], function(current)
                            current = math.floor(current)
                            if DrawableClothes[i] ~= current then
                                DrawableClothes[i] = current
                                TextureClothes[i] = 0
                                SetPedComponentVariation(ped, i, current, 0, 0)
                            end
                        end)
                    end

                    if i ~= 2 then
                        local maxtex = GetNumberOfPedTextureVariations(ped,i, DrawableClothes[i])
                        if maxtex > 1 then

                            if i == 0 and  FreemodePed(ped) then
                                goto nextS
                            end

                            Menu.SliderStep(clothingNames[i]..' Variation', 0, maxtex-1, 1, TextureClothes[i], function(current)
                                current = math.floor(current)
                                if TextureClothes[i] ~= current then
                                    TextureClothes[i] = current
                                    SetPedComponentVariation(ped, i, DrawableClothes[i], TextureClothes[i], 0)
                                end
                            end)
                        end
                    end

                    if i == 2 then
                        if FreemodePed(ped) then
                            Menu.Slider('Hair Color', 64, hairColor, function(current)
                                if current ~= hairColor then
                                    hairColor = current
                                    SetPedHairColor(ped, hairColor, hairHighlight)
                                end
                            end)
                            Menu.Slider('Hair Highlight', 64, hairHighlight, function(current)
                                if current ~= hairHighlight then
                                    hairHighlight = current
                                    SetPedHairColor(ped, hairColor, hairHighlight)
                                end
                            end)
                        end
                    end

                    ::nextS::
                end
            elseif tbl[clothingTypeSlider] == 'Props' then
                for i=0,7 do
                    local max = GetNumberOfPedPropDrawableVariations(ped, i)
                    if max > 0 then
                        Menu.SliderStep(propNames[i], -1, max-1, 1, DrawableProp[i], function(current)
                            current = math.floor(current)
                            if DrawableProp[i] ~= current then
                                DrawableProp[i] = current
                                TextureProp[i] = 0
                                SetPedPropIndex(ped, i, current, 0, true)

                                if current == -1 then
                                    ClearPedProp(ped, i)
                                end
                            end
                        end)
                    end

                    local maxtex = GetNumberOfPedPropTextureVariations(ped,i, DrawableProp[i])
                    if maxtex > 1 then
                        Menu.SliderStep(propNames[i]..' Variation', 0, maxtex-1, 1, TextureProp[i], function(current)
                            current = math.floor(current)
                            if TextureProp[i] ~= current then
                                TextureProp[i] = current
                                SetPedPropIndex(ped, i, DrawableProp[i], TextureProp[i], true)
                            end
                        end)
                    end
                end
            elseif tbl[clothingTypeSlider] == 'Face' then
                Menu.SliderStep('Face: Father', 0, 45, 1, blend[1], function(current)
                    if current ~= blend[1] then
                        current = math.floor(current)
                        blend[1] = current
                        SetPedHeadBlendData(ped, blend[1], blend[2], blend[3], blend[4], blend[5], blend[6], blend[7], blend[8], blend[9], blend[10])
                    end
                end)

                Menu.SliderStep('Face: Mother', 0, 45, 1, blend[2], function(current)
                    if current ~= blend[2] then
                        current = math.floor(current)
                        blend[2] = current
                        SetPedHeadBlendData(ped, blend[1], blend[2], blend[3], blend[4], blend[5], blend[6], blend[7], blend[8], blend[9], blend[10])
                    end
                end)

                Menu.SliderStep('Face Inheritance', 0.0, 1.0, 0.1, blend[7], function(current)
                    if current ~= blend[7] then
                        blend[7] = current
                        SetPedHeadBlendData(ped, blend[1], blend[2], blend[3], blend[4], blend[5], blend[6], blend[7], blend[8], blend[9], blend[10])
                    end
                end)

                Menu.SliderStep('Skin: Father', 0, 45, 1, blend[4], function(current)
                    if current ~= blend[4] then
                        current = math.floor(current)
                        blend[4] = current
                        SetPedHeadBlendData(ped, blend[1], blend[2], blend[3], blend[4], blend[5], blend[6], blend[7], blend[8], blend[9], blend[10])
                    end
                end)

                Menu.SliderStep('Skin: Mother', 0, 45, 1, blend[5], function(current)
                    if current ~= blend[5] then
                        current = math.floor(current)
                        blend[5] = current
                        SetPedHeadBlendData(ped, blend[1], blend[2], blend[3], blend[4], blend[5], blend[6], blend[7], blend[8], blend[9], blend[10])
                    end
                end)

                Menu.SliderStep('Skin Inheritance', 0.0, 1.0 ,0.1, blend[8], function(current)
                    if current ~= blend[8] then
                        blend[8] = current
                        SetPedHeadBlendData(ped, blend[1], blend[2], blend[3], blend[4], blend[5], blend[6], blend[7], blend[8], blend[9], blend[10])
                    end
                end)

                Menu.Slider('Eye Color', 32, eyeColor, function(current)
                    if current ~= eyeColor then
                        eyeColor = current
                        SetPedEyeColor(ped , eyeColor)
                    end
                end)

                for i=0,19 do
                    Menu.SliderStep(featureNames[i+1], -1.0, 1.0, 0.1, FaceFeature[i], function(current)
                        if FaceFeature[i] ~= current then
                            FaceFeature[i] = current
                            SetPedFaceFeature(ped, i, FaceFeature[i])
                        end
                    end)
                end
            elseif tbl[clothingTypeSlider] == 'Face Overlay' then
                for i=0,12 do
                    Menu.SliderStep(overlayNames[i+1], -1.0, GetNumHeadOverlayValues(i) - 1, 1.0, HeadOverlayDraw[i], function(current)
                        if HeadOverlayDraw[i] ~= current then
                            HeadOverlayDraw[i] = math.floor(current)
                            SetPedHeadOverlay(ped, i, HeadOverlayDraw[i], HeadOverlayOpacity[i])
                        end
                    end)
                    if hasColors[i] then
                        Menu.SliderStep(overlayNames[i+1]..' Color', 0, 64, 1, HeadOverlayTexture[i], function(current)
                            if HeadOverlayTexture[i] ~= current then
                                HeadOverlayTexture[i] = math.floor(current)
                                SetPedHeadOverlayColor(ped, i, hasColors[i], HeadOverlayTexture[i], 1)
                            end
                        end)
                    end
                    Menu.SliderStep(overlayNames[i+1]..' Opacity', 0.0, 1.0, 0.1, HeadOverlayOpacity[i], function(current)
                        if HeadOverlayOpacity[i] ~= current then
                            HeadOverlayOpacity[i] = current
                            SetPedHeadOverlay(ped, i, HeadOverlayDraw[i], HeadOverlayOpacity[i])
                        end
                    end)
                end
            end

        elseif Menu.CurrentMenu == 'Outfits' then
            if Menu.Button('Create Outfit') then
                local outfitID = Task.Run('CreateOutfit', GetClothing())
            end

            for k,v in pairs(outfits) do
                if Menu.ComboBox(v.Name, {'Load', 'Save', 'Rename', 'Delete'}, sInd[k] or 1, function(curr)
                    if sInd[k] ~= curr then
                        sInd[k] = curr
                    end
                end) then
                    if sInd[k] == 1 then
                        LoadClothing(v)
                        oName, oID = v.Name, v.ID
                        Menu.Menus['Clothing'].SubTitle = 'Outfit: '..(oName or '')
                        GetClothing(oName, oID)
                    elseif sInd[k] == 2 then
                        TriggerServerEvent('SaveOutfit', GetClothing(v.Name, v.ID))
                        outfits[k] = GetClothing(v.Name, v.ID)
                    elseif sInd[k] == 3 then
                        local name = Shared.TextInput('Outfit Name', 16)
                        if name ~= '' then
                            TriggerServerEvent('RenameOutfit', name, v.ID)
                            v.Name = name
                        end
                    elseif sInd[k] == 4 then
                        TriggerServerEvent('DeleteOutfit', v.ID)
                    end
                end
            end
        end

        Menu.Display(100)
    end ]]
    if MyCharacter then
        local cl = json.decode(MyCharacter.clothing)
        TriggerServerEvent('Clothing:SaveData', json.encode(GetClothing(cl.Name, oID)))
    end

    GetClothing()
end

function FreemodePed(ped)
    local model = GetEntityModel(ped)

    if model == male or model == female then
        return true
    end

    return false
end

function GetClothing(OutfitName, id)
    local ped = PlayerPedId()
    for i=0, 11 do
        DrawableClothes[i] = GetPedDrawableVariation(ped, i)
        TextureClothes[i] = GetPedTextureVariation(ped, i)
        PalleteClothes[i] = GetPedPaletteVariation(ped, i)
    end

    for i=0,7 do
        DrawableProp[i] = GetPedPropIndex(ped, i)
        TextureProp[i] =  GetPedPropTextureIndex(ped, i)
    end

    for i=0,19 do
        FaceFeature[i] = GetPedFaceFeature(ped, i)
    end


    for i=0,12 do
        local found, ovly, cType, fColor, SCOLOR, opac = GetPedHeadOverlayData(PlayerPedId(), i)
        HeadOverlayDraw[i] = GetPedHeadOverlayValue(ped, i)

        if HeadOverlayDraw[i] == 255 then
            HeadOverlayDraw[i] = -1
        end

        HeadOverlayTexture[i] = fColor
        HeadOverlayOpacity[i] = opac
    end

    hairColor = GetPedHairColor(ped)
    hairHighlight = GetPedHairHighlightColor(ped)

    eyeColor = GetPedEyeColor(ped)
    --[[ local val = exports['hbw']:GetHeadBlendData(ped)
    local blend = {val.FirstFaceShape, val.SecondFaceShape, val.ThirdFaceShape, val.FirstSkinTone, val.SecondSkinTone, val.ThirdSkinTone, val.ParentFaceShapePercent, val.ParentSkinTonePercent, val.ParentThirdUnkPercent, val.IsParentInheritance} ]]

    local blend = {GetHeadBlendData()}

    MiscClothing = {}
    if FreemodePed(ped) then
        MiscClothing = {
            Clothing = {
                Drawable = DrawableClothes,
                Texture = TextureClothes,
            },
            Props = {
                Drawable = DrawableProp,
                Texture = TextureProp,
            },
            Overlay = {
                Drawable = HeadOverlayDraw,
                Texture = HeadOverlayTexture,
                Opacity = HeadOverlayOpacity,
            },
            FaceData = blend,
            FaceShape = FaceFeature,
            HairColor = hairColor,
            EyeColor = eyeColor,
            Name = OutfitName or 'Unset',
            Model = GetEntityModel(ped),
            HairHighlight = hairHighlight,
            ID = id or -1
        }
    else
        MiscClothing = {
            Clothing = {
                Drawable = DrawableClothes,
                Texture = TextureClothes,
            },
            Props = {
                Drawable = DrawableProp,
                Texture = TextureProp,
            },
            Name = OutfitName or 'Unset',
            Model = GetEntityModel(ped),
            ID = id or -1
        }
    end

    local val = json.decode(json.encode(MiscClothing))
    return val
end

function SetModel(skin)
    if type(skin) == 'string' then
        skin = GetHashKey(skin)
    end

    if GetEntityModel(PlayerPedId()) ~= skin then
        RequestModel(skin)
        while not HasModelLoaded(skin) do
            Wait(0)
        end

        SetPlayerModel(PlayerId(), skin)
        SetModelAsNoLongerNeeded(skin)

        for i=0,11 do
            SetPedComponentVariation(PlayerPedId(), i, 0, 0, 0)
        end
    end

    SetPedMinGroundTimeForStungun(Shared.Ped, 2000)
end

function LoadClothing(file, _ped)
    local ped = _ped or PlayerPedId()
    local health = GetEntityHealth(ped)
    local armor = GetPedArmour(ped)
    if not _ped then
        SetModel(file.Model)
    end
    ped = _ped or PlayerPedId()

    for i=0,11 do
        SetPedComponentVariation(ped, i, file.Clothing.Drawable[tostring(i)], file.Clothing.Texture[tostring(i)], 2)
    end
    for i=0,7 do
        SetPedPropIndex(ped, i, file.Props.Drawable[tostring(i)], file.Props.Texture[tostring(i)], true)
        if file.Props.Drawable[tostring(i)] == -1 then
            ClearPedProp(ped, i)
        end
    end
    if FreemodePed(ped) then
        SetPedHeadBlendData(ped, file.FaceData[1], file.FaceData[2], file.FaceData[3], file.FaceData[4], file.FaceData[5],file.FaceData[6], file.FaceData[7] + 0.0, file.FaceData[8] + 0.0, file.FaceData[9] + 0.0, file.FaceData[10])
        for i=0,12 do
            SetPedHeadOverlay(ped, i, file.Overlay.Drawable[tostring(i)], file.Overlay.Opacity[tostring(i)] + 0.0)
            SetPedHeadOverlayColor(ped, i, hasColors[i] or 0, file.Overlay.Texture[tostring(i)], 1)
        end
        for i=0,19 do
            SetPedFaceFeature(ped, i, file.FaceShape[tostring(i)])
        end
        SetPedHairColor(ped, file.HairColor, file.HairHighlight)
        SetPedEyeColor(ped, file.EyeColor)
    end
    ClearPedDecorations(ped)
    ClearPedBloodDamage(ped)
    if not _ped then
        Wait(100)
        TriggerServerEvent('Clothing:SaveData',json.encode(file))
        if MyCharacter then
            for k,v in pairs(json.decode(MyCharacter.tattoos)) do
                for key,val in pairs(v) do
                    for n in pairs(val) do
                        SetPedDecoration(ped, GetHashKey(key), GetHashKey(n))
                    end
                end
            end
        end
    end
    SetPedSuffersCriticalHits(ped, false)
    SetEntityHealth(ped, health)
    SetPedArmour(ped, armor)
end

RegisterCommand('hat', function()
    if MyCharacter then
        local clothing = json.decode(MyCharacter.clothing)
        if GetPedPropIndex(Shared.Ped, 0) == -1 then
            LoadAnim("mp_masks@standard_car@ds@")
            TaskPlayAnim(Shared.Ped, "mp_masks@standard_car@ds@", "put_on_mask",8.0, 1.0, math.floor(GetAnimDuration("mp_masks@standard_car@ds@", "put_on_mask") * 1000) - 600, 51, 0, 0, 0, 0)
            Wait(math.floor(GetAnimDuration("mp_masks@standard_car@ds@", "put_on_mask") * 1000))
            SetPedPropIndex(Shared.Ped, 0, clothing.Props.Drawable['0'], clothing.Props.Texture['0'])
        else
            LoadAnim("missheist_agency2ahelmet")
            TaskPlayAnim(Shared.Ped, "missheist_agency2ahelmet", "take_off_helmet_stand",8.0, 1.0, math.floor(GetAnimDuration("missheist_agency2ahelmet", "take_off_helmet_stand") * 1000) - 500, 51, 0, 0, 0, 0)
            Wait(math.floor(GetAnimDuration("missheist_agency2ahelmet", "take_off_helmet_stand") * 1000) - 500)
            ClearPedProp(Shared.Ped, 0)
        end
    end
end)

RegisterCommand('mask', function(source, args)
    if MyCharacter then
        local clothing = json.decode(MyCharacter.clothing)
        if GetPedDrawableVariation(Shared.Ped, 1) == clothing.Clothing.Drawable['1'] and clothing.Clothing.Drawable['1'] ~= 0 then

            if clothing.Clothing.Drawable['1'] ~= -1 then
                Task.Run('GiveMask', clothing.Clothing.Drawable['1'], clothing.Clothing.Texture['1'], clothing.Model)
            end

            LoadAnim("mp_masks@standard_car@ds@")
            TaskPlayAnim(Shared.Ped, "mp_masks@standard_car@ds@", "put_on_mask", 8.0, 8.0, math.floor(GetAnimDuration("mp_masks@standard_car@ds@", "put_on_mask") * 1000) - 600, 51, 0, 0, 0, 0)
            Wait(math.floor(GetAnimDuration("mp_masks@standard_car@ds@", "put_on_mask") * 1000) - 1000)
            SetPedComponentVariation(Shared.Ped, 1, 0, 0, 0)
            local cl = json.decode(MyCharacter.clothing)
            TriggerServerEvent('Clothing:SaveData', json.encode(GetClothing(cl.Name, oID)))
        else
            local inv = exports['geo-inventory']:GetInventory()
            for k,v in pairs(inv) do
                if v.Key == 'mask' then
                    if args[1] == v.ID or args[1] == nil then

                        if v.Data.Model ~= clothing.Model then
                            TriggerEvent('Shared.Notif', "This does not fit you", 2500)
                            return
                        end

                        LoadAnim("mp_masks@standard_car@ds@")
                        TaskPlayAnim(Shared.Ped, "mp_masks@standard_car@ds@", "put_on_mask", 8.0, 8.0, math.floor(GetAnimDuration("mp_masks@standard_car@ds@", "put_on_mask") * 1000) - 600, 51, 0, 0, 0, 0)
                        Wait(math.floor(GetAnimDuration("mp_masks@standard_car@ds@", "put_on_mask") * 1000) - 1000)
                        SetPedComponentVariation(Shared.Ped, 1, v.Data.Drawable, v.Data.Texture, 0)
                        Task.Run('ConsumeMask', v.ID)
                        local cl = json.decode(MyCharacter.clothing)
                        cl.Clothing.Drawable['1'] = v.Data.Drawable
                        cl.Clothing.Texture['1'] = v.Data.Texture
                        TriggerServerEvent('Clothing:SaveData', json.encode(GetClothing(cl.Name, oID)))
                        break
                    end
                end
            end
        end
    end
end)

RegisterCommand('bag', function()
    if MyCharacter then
        local clothing = json.decode(MyCharacter.clothing)
        if GetPedDrawableVariation(Shared.Ped, 5) == clothing.Clothing.Drawable['5'] then
            LoadAnim("anim@heists@ornate_bank@grab_cash")
            TaskPlayAnim(Shared.Ped, "anim@heists@ornate_bank@grab_cash", "intro", 8.0, 8.0, 1600, 51, 0, 0, 0, 0)
            Wait(1600)
            SetPedComponentVariation(Shared.Ped, 5, -1, 0, 0)
        else
            LoadAnim("anim@heists@ornate_bank@grab_cash")
            TaskPlayAnim(Shared.Ped, "anim@heists@ornate_bank@grab_cash", "intro", 8.0, 8.0, 1600, 51, 0, 0, 0, 0)
            Wait(1600)
            SetPedComponentVariation(Shared.Ped, 5, clothing.Clothing.Drawable['5'], clothing.Clothing.Texture['5'], 0)
        end
    end
end)

RegisterCommand('glasses', function(source, args)
    if MyCharacter then
        local clothing = json.decode(MyCharacter.clothing)
        if GetPedPropIndex(Shared.Ped, 1) == clothing.Props.Drawable['1'] then
            LoadAnim("clothingspecs")
            TaskPlayAnim(Shared.Ped, "clothingspecs", "take_off", 8.0, 8.0, 1600, 51, 0, 0, 0, 0)
            Wait(1600)
            ClearPedProp(Shared.Ped, 1)        
        else
            LoadAnim("clothingspecs")
            TaskPlayAnim(Shared.Ped, "clothingspecs", "try_glasses_negative_b", 8.0, 8.0, 1600, 51, 0, 0, 0, 0)
            Wait(1600)
            SetPedPropIndex(Shared.Ped, 1, clothing.Props.Drawable['1'], clothing.Props.Texture['1'])
        end
    end
end)

exports('ClothingMenu', ClothingMenu)
exports('LoadClothing', LoadClothing)
exports('ClothingStore', ClothingStore)
exports('AtClothingStore', function()
    local pos = GetEntityCoords(Shared.Ped)
    for k,v in pairs(clothingStores) do
        if Vdist4(pos, v) <= 10.0 then
            return true
        end
    end
end)

exports('ClothingStoreLocations', function()
    return clothingStores
end)

function getHeadBlendData()
    -- we need 78 bytes, 4 buffer bytes at the beginning + 1 to get the actual value
    local bytes = string.rep("000000", 13)
    if Citizen.InvokeNative(0x2746BD9D88C5C5D0, PlayerPedId(), bytes) then
        -- for i = 1, 73 do
        --     print(i, string.unpack("<i4", bytes, i))
        -- end
        return {
            -- <i4 is a buffer of 4 bytes?
            shapeFirst = string.unpack("<i4", bytes, 1),
            shapeSecond = string.unpack("<i4", bytes, 9),
            shapeThird = string.unpack("<i4", bytes, 17),
            skinFirst = string.unpack("<i4", bytes, 25),
            skinSecond = string.unpack("<i4", bytes, 33),
            skinThird = string.unpack("<i4", bytes, 41),
            -- why isn't this one extacted with float? IS it because I don't have a shape mix?
            -- might break, if this overflows or anything (returns some insane number) change it to a float.
            shapeMix = string.unpack("<i4", bytes, 49),
            skinMix = string.unpack("<f", bytes, 57), 
            thirdMix = string.unpack("<i4", bytes, 65), 
            hasParent = string.unpack("<i4", bytes, 73) ~= 0
        }
    else
        return false
    end
end

exports('GetRandomModel', function()
    if Random(2) == 1 then
        return Male[Random(#Male)]
    else
        return Female[Random(#Female)]
    end
end)

local gloves = {
    Male = {
        [17] = 29,
        [19] = 29,
        [20] = 29,
        [21] = 29,
        [22] = 29,
        [23] = 29,
        [24] = 29,
        [25] = 29,
        [26] = 29,
        [27] = 29,
        [28] = 29,
        [30] = 40,
        [31] = 40,
        [32] = 40,
        [33] = 40,
        [34] = 40,
        [35] = 40,
        [36] = 40,
        [37] = 40,
        [38] = 40,
        [39] = 40,
        [40] = 51,
        [41] = 51,
        [42] = 51,
        [43] = 51,
        [44] = 51,
        [45] = 51,
        [46] = 51,
        [47] = 51,
        [48] = 51,
        [49] = 51,
        [50] = 51,
    },

    Female = {}
   
}

for i = 52, 61 do
    gloves.Male[i] = 62  
end

for i = 63, 72 do
    gloves.Male[i] = 73  
end

for i = 74, 83 do
    gloves.Male[i] = 84  
end

for i = 74, 83 do
    gloves.Male[i] = 84  
end

for i = 85, 94 do
    gloves.Male[i] = 95  
end

for i = 99, 108 do
    gloves.Male[i] = 109  
end

for i = 171, 183 do
    gloves.Male[i] = 170  
end

for i = 20, 32 do
    gloves.Female[i] = 33  
end

for i = 20, 32 do
    gloves.Female[i] = 33  
end

for i = 33, 44 do
    gloves.Female[i] = 45  
end

for i = 46, 57 do
    gloves.Female[i] = 58  
end

for i = 59, 70 do
    gloves.Female[i] = 71
end

for i = 72, 83 do
    gloves.Female[i] = 84
end

for i = 85, 96 do
    gloves.Female[i] = 97
end

for i = 98, 109 do
    gloves.Female[i] = 110
end

for i = 114, 125 do
    gloves.Female[i] = 126
end

local gloveOff = {
    Male = {
        [16] = 4,
        [17] = 4,
        [18] = 4,
        [19] = 0,
        [20] = 1,
        [21] = 2,
        [22] = 4,
        [23] = 5,
        [24] = 6,
        [25] = 8,
        [26] = 11,
        [27] = 12,
        [28] = 14,
        [29] = 15,
        [30] = 0,
        [31] = 1,
        [32] = 2,
        [33] = 4,
        [34] = 5,
        [35] = 6,
        [36] = 8,
        [37] = 11,
        [38] = 12,
        [39] = 14,
        [40] = 15,
        [41] = 0,
        [42] = 1,
        [43] = 2,
        [44] = 4,
        [45] = 5,
        [46] = 6,
        [47] = 8,
        [48] = 11,
        [49] = 12,
        [50] = 14,
        [51] = 15,
        [52] = 0,
        [53] = 1,
        [54] = 2,
        [55] = 4,
        [56] = 5,
        [57] = 6,
        [58] = 8,
        [59] = 11,
        [60] = 12,
        [61] = 14,
        [62] = 15,
        [63] = 0,
        [64] = 1,
        [65] = 2,
        [66] = 4,
        [67] = 5,
        [68] = 6,
        [69] = 8,
        [70] = 11,
        [71] = 12,
        [72] = 14,
        [73] = 15,
        [74] = 0,
        [75] = 1,
        [76] = 2,
        [77] = 4,
        [78] = 5,
        [79] = 6,
        [80] = 8,
        [81] = 11,
        [82] = 12,
        [83] = 14,
        [84] = 15,
        [85] = 0,
        [86] = 1,
        [87] = 2,
        [88] = 4,
        [89] = 5,
        [90] = 6,
        [91] = 8,
        [92] = 11,
        [93] = 12,
        [94] = 14,
        [95] = 15,
        [96] = 4,
        [97] = 4,
        [98] = 4,
        [99] = 0,
        [100] = 1,
        [101] = 2,
        [102] = 4,
        [103] = 5,
        [104] = 6,
        [105] = 8,
        [106] = 11,
        [107] = 12,
        [108] = 14,
        [109] = 15,
        [110] = 4,
        [111] = 4,
        [115] = 112,
        [116] = 112,
        [117] = 112,
        [118] = 112,
        [119] = 112,
        [120] = 112,
        [121] = 112,
        [122] = 113,
        [123] = 113,
        [124] = 113,
        [125] = 113,
        [126] = 113,
        [127] = 113,
        [128] = 113,
        [129] = 114,
        [130] = 114,
        [131] = 114,
        [132] = 114,
        [133] = 114,
        [134] = 114,
        [135] = 114,
        [136] = 15,
        [137] = 15,
        [138] = 0,
        [139] = 1,
        [140] = 2,
        [141] = 4,
        [142] = 5,
        [143] = 6,
        [144] = 8,
        [145] = 11,
        [146] = 12,
        [147] = 14,
        [148] = 112,
        [149] = 113,
        [150] = 114,
        [151] = 0,
        [152] = 1,
        [153] = 2,
        [154] = 4,
        [155] = 5,
        [156] = 6,
        [157] = 8,
        [158] = 11,
        [159] = 12,
        [160] = 14,
        [161] = 112,
        [162] = 113,
        [163] = 114,
        [165] = 4,
        [166] = 4,
        [167] = 4,
    },
    Female = {
        [16] = 11,
        [17] = 3,
        [18] = 3,
        [19] = 3,
        [20] = 0,
        [21] = 1,
        [22] = 2,
        [23] = 3,
        [24] = 4,
        [25] = 5,
        [26] = 6,
        [27] = 7,
        [28] = 9,
        [29] = 11,
        [30] = 12,
        [31] = 14,
        [32] = 15,
        [33] = 0,
        [34] = 1,
        [35] = 2,
        [36] = 3,
        [37] = 4,
        [38] = 5,
        [39] = 6,
        [40] = 7,
        [41] = 9,
        [42] = 11,
        [43] = 12,
        [44] = 14,
        [45] = 15,
        [46] = 0,
        [47] = 1,
        [48] = 2,
        [49] = 3,
        [50] = 4,
        [51] = 5,
        [52] = 6,
        [53] = 7,
        [54] = 9,
        [55] = 11,
        [56] = 12,
        [57] = 14,
        [58] = 15,
        [59] = 0,
        [60] = 1,
        [61] = 2,
        [62] = 3,
        [63] = 4,
        [64] = 5,
        [65] = 6,
        [66] = 7,
        [67] = 9,
        [68] = 11,
        [69] = 12,
        [70] = 14,
        [71] = 15,
        [72] = 0,
        [73] = 1,
        [74] = 2,
        [75] = 3,
        [76] = 4,
        [77] = 5,
        [78] = 6,
        [79] = 7,
        [80] = 9,
        [81] = 11,
        [82] = 12,
        [83] = 14,
        [84] = 15,
        [85] = 0,
        [86] = 1,
        [87] = 2,
        [88] = 3,
        [89] = 4,
        [90] = 5,
        [91] = 6,
        [92] = 7,
        [93] = 9,
        [94] = 11,
        [95] = 12,
        [96] = 14,
        [97] = 15,
        [98] = 0,
        [99] = 1,
        [100] = 2,
        [101] = 3,
        [102] = 4,
        [103] = 5,
        [104] = 6,
        [105] = 7,
        [106] = 9,
        [107] = 11,
        [108] = 12,
        [109] = 14,
        [110] = 15,
        [111] = 3,
        [112] = 3,
        [113] = 3,
        [114] = 0,
        [115] = 1,
        [116] = 2,
        [117] = 3,
        [118] = 4,
        [119] = 5,
        [120] = 6,
        [121] = 7,
        [122] = 9,
        [123] = 11,
        [124] = 12,
        [125] = 14,
        [126] = 15,
        [127] = 3,
        [128] = 3,
        [132] = 129,
        [133] = 129,
        [134] = 129,
        [135] = 129,
        [136] = 129,
        [137] = 129,
        [138] = 129,
        [139] = 130,
        [140] = 130,
        [141] = 130,
        [142] = 130,
        [143] = 130,
        [144] = 130,
        [145] = 130,
        [146] = 131,
        [147] = 131,
        [148] = 131,
        [149] = 131,
        [150] = 131,
        [151] = 131,
        [152] = 131,
        [154] = 153,
        [155] = 153,
        [156] = 153,
        [157] = 153,
        [158] = 153,
        [159] = 153,
        [160] = 153,
        [162] = 161,
        [163] = 161,
        [164] = 161,
        [165] = 161,
        [166] = 161,
        [167] = 161,
        [168] = 161,
        [169] = 15,
        [170] = 15,
        [171] = 0,
        [172] = 1,
        [173] = 2,
        [174] = 3,
        [175] = 4,
        [176] = 5,
        [177] = 6,
        [178] = 7,
        [179] = 9,
        [180] = 11,
        [181] = 12,
        [182] = 14,
        [183] = 129,
        [184] = 130,
        [185] = 131,
        [186] = 153,
        [187] = 0,
        [188] = 1,
        [189] = 2,
        [190] = 3,
        [191] = 4,
        [192] = 5,
        [193] = 6,
        [194] = 7,
        [195] = 9,
        [196] = 11,
        [197] = 12,
        [198] = 14,
        [199] = 129,
        [200] = 130,
        [201] = 131,
        [202] = 153,
        [203] = 161,
        [204] = 161,
        [206] = 3,
        [207] = 3,
        [208] = 3,
    }
}

RegisterCommand('shirt', function()
    if MyCharacter then
        local clothing = json.decode(MyCharacter.clothing)
        if GetPedDrawableVariation(Shared.Ped, 8) == clothing.Clothing.Drawable['8'] and GetPedDrawableVariation(Shared.Ped, 11) == clothing.Clothing.Drawable['11'] then
            LoadAnim("anim@heists@ornate_bank@grab_cash")
            TaskPlayAnim(Shared.Ped, "anim@heists@ornate_bank@grab_cash", "intro", 8.0, 8.0, 1600, 51, 0, 0, 0, 0)
            Wait(1600)
            SetPedComponentVariation(Shared.Ped, 8, 15, 0, 0)
            SetPedComponentVariation(Shared.Ped, 11, 15, 0, 0)
            SetPedComponentVariation(Shared.Ped, 10, 0, 0, 0)
            SetPedComponentVariation(Shared.Ped, 7, 0, 0, 0)
            SetPedComponentVariation(Shared.Ped, 5, 0, 0, 0)

            local tbl = GetEntityModel(Shared.Ped) == `mp_m_freemode_01` and gloves.Male or gloves.Female

            if tbl[GetPedDrawableVariation(Shared.Ped, 3)] then
                SetPedComponentVariation(Shared.Ped, 3, tbl[GetPedDrawableVariation(Shared.Ped, 3)], GetPedTextureVariation(Shared.Ped, 3), 0)
            else
                SetPedComponentVariation(Shared.Ped, 3, 15, 0, 0)
            end
        else
            LoadAnim("anim@heists@ornate_bank@grab_cash")
            TaskPlayAnim(Shared.Ped, "anim@heists@ornate_bank@grab_cash", "intro", 8.0, 8.0, 1600, 51, 0, 0, 0, 0)
            Wait(1600)
            SetPedComponentVariation(Shared.Ped, 8, clothing.Clothing.Drawable['8'], clothing.Clothing.Texture['8'], 0)
            SetPedComponentVariation(Shared.Ped, 11, clothing.Clothing.Drawable['11'], clothing.Clothing.Texture['11'], 0)
            SetPedComponentVariation(Shared.Ped, 10, clothing.Clothing.Drawable['10'], clothing.Clothing.Texture['10'], 0)
            SetPedComponentVariation(Shared.Ped, 7, clothing.Clothing.Drawable['7'], clothing.Clothing.Texture['7'], 0)
            SetPedComponentVariation(Shared.Ped, 5, clothing.Clothing.Drawable['5'], clothing.Clothing.Texture['5'], 0)

            local ntbl = GetEntityModel(Shared.Ped) == `mp_m_freemode_01` and gloves.Male or gloves.Female

            if (GetPedDrawableVariation(Shared.Ped, 3) ~= clothing.Clothing.Drawable['3']) then
                local wearingGloves = GetPedDrawableVariation(Shared.Ped, 3) == ntbl[clothing.Clothing.Drawable['3']]
                SetPedComponentVariation(Shared.Ped, 3, clothing.Clothing.Drawable['3'], clothing.Clothing.Texture['3'], 0)
                if wearingGloves then return end
                
                Wait(0)
                local gloveTbl = GetEntityModel(Shared.Ped) == `mp_m_freemode_01` and gloveOff.Male or gloveOff.Female
                if gloveTbl[GetPedDrawableVariation(Shared.Ped, 3)] then
                    local tbl = GetEntityModel(Shared.Ped) == `mp_m_freemode_01` and gloveOff.Male or gloveOff.Female
                    if tbl[GetPedDrawableVariation(Shared.Ped, 3)] then
                        SetPedComponentVariation(Shared.Ped, 3, tbl[GetPedDrawableVariation(Shared.Ped, 3)], 0, 0)
                    else
                        TriggerEvent('Shared.Notif', "Not set up yet, annoying task.")
                    end
                end
            end
        end
    end
end)

RegisterCommand('pants', function()
    if MyCharacter then
        local clothing = json.decode(MyCharacter.clothing)
        if GetPedDrawableVariation(Shared.Ped, 4) == clothing.Clothing.Drawable['4']then
            LoadAnim("anim@heists@ornate_bank@grab_cash")
            TaskPlayAnim(Shared.Ped, "anim@heists@ornate_bank@grab_cash", "intro", 8.0, 8.0, 1600, 51, 0, 0, 0, 0)
            Wait(1600)
            if GetEntityModel(Shared.Ped) == `mp_m_freemode_01` then
                SetPedComponentVariation(Shared.Ped, 4, 61, 3, 0)
            else
                SetPedComponentVariation(Shared.Ped, 4, 15, 0, 0)
            end
        else
            LoadAnim("anim@heists@ornate_bank@grab_cash")
            TaskPlayAnim(Shared.Ped, "anim@heists@ornate_bank@grab_cash", "intro", 8.0, 8.0, 1600, 51, 0, 0, 0, 0)
            Wait(1600)
            SetPedComponentVariation(Shared.Ped, 4, clothing.Clothing.Drawable['4'], clothing.Clothing.Texture['4'], 0)
        end
    end
end)

RegisterCommand('gloves', function()
    if MyCharacter then
        local clothing = json.decode(MyCharacter.clothing)
        local gloveTbl = GetEntityModel(Shared.Ped) == `mp_m_freemode_01` and gloveOff.Male or gloveOff.Female
        local ntbl = GetEntityModel(Shared.Ped) == `mp_m_freemode_01` and gloves.Male or gloves.Female

        if GetPedDrawableVariation(Shared.Ped, 3) == clothing.Clothing.Drawable['3'] or ntbl[clothing.Clothing.Drawable['3']] == GetPedDrawableVariation(Shared.Ped, 3) then
            local tbl = GetEntityModel(Shared.Ped) == `mp_m_freemode_01` and gloveOff.Male or gloveOff.Female
            local val = tbl[GetPedDrawableVariation(Shared.Ped, 3)] 
            if not val then
                val = 4
            end

            LoadAnim("anim@heists@ornate_bank@grab_cash")
            TaskPlayAnim(Shared.Ped, "anim@heists@ornate_bank@grab_cash", "intro", 8.0, 8.0, 1600, 51, 0, 0, 0, 0)
            Wait(1600)

            if val == 4 and GetPedDrawableVariation(Shared.Ped, 11) == 15 then
                val = 15
            end

            SetPedComponentVariation(Shared.Ped, 3, val, 0, 0)
        else
            local tbl = GetEntityModel(Shared.Ped) == `mp_m_freemode_01` and gloveOff.Male or gloveOff.Female
            if GetPedDrawableVariation(Shared.Ped, 11) == 15 and not tbl[clothing.Clothing.Drawable['3']] then
                print('no')
                return  
            end

            LoadAnim("anim@heists@ornate_bank@grab_cash")
            TaskPlayAnim(Shared.Ped, "anim@heists@ornate_bank@grab_cash", "intro", 8.0, 8.0, 1600, 51, 0, 0, 0, 0)
            Wait(1600)

            local tbl = GetEntityModel(Shared.Ped) == `mp_m_freemode_01` and gloves.Male or gloves.Female

            if tbl[clothing.Clothing.Drawable['3']] and GetPedDrawableVariation(Shared.Ped, 11) == 15 then
                SetPedComponentVariation(Shared.Ped, 3, tbl[clothing.Clothing.Drawable['3']], clothing.Clothing.Texture['3'], 0)
            else
                SetPedComponentVariation(Shared.Ped, 3, clothing.Clothing.Drawable['3'], clothing.Clothing.Texture['3'], 0)
            end
        end
    end
end)