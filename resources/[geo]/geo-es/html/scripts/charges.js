var charges = [
    {
        "fine": 30000,
        "time": 5760,
        "type": "Felony",
        "description": "The unlawful use of force and violence against persons or property to intimidate or coerce a government, the civilian population, or any segment thereof, in furtherance of political or social objectives",
        "title": "Terrorism",
        "chargeID": 0,
        "hidden": 1
    },
    {
        "fine": 50000,
        "time": 5760,
        "type": "Felony",
        "description": "The premeditated act of ending another person's life.",
        "title": "Murder",
        "chargeID": 1
    },
    {
        "fine": 10000,
        "time": 2880,
        "type": "Felony",
        "description": "The premeditated attempt to end the life of an individual",
        "title": "Attempted Murder",
        "chargeID": 2
    },
    {
        "fine": 0,
        "time": 2880,
        "type": "Felony",
        "description": "A person who knowingly or intentionally leaves a jail or prison facility before their time has been completely served.",
        "title": "Escaping Prison",
        "chargeID": 3
    },
    {
        "fine": 30000,
        "time": 2880,
        "type": "Felony",
        "description": "The act of knowingly transporting 1 kilogram or more of any CDS",
        "title": "Drug Trafficking",
        "chargeID": 4
    },
    {
        "fine": 10000,
        "time": 1440,
        "type": "Felony",
        "description": "A person who knowingly kills another person with quarrel or heat of passion.",
        "title": "Voluntary Manslaughter",
        "chargeID": 5
    },
    {
        "fine": 2000,
        "time": 30,
        "type": "Felony",
        "description": "The act of knowingly altering, creating, or uses a falsified written document with the intent to defraud or deceive another.",
        "title": "Forgery",
        "chargeID": 6
    },
    {
        "fine": 1500,
        "time": 45,
        "type": "Felony",
        "description": "The act of presenting themselves as, or claiming to be a government employee without being employed by said agency",
        "title": "Impersonation of a Government Employee",
        "chargeID": 7
    },
    {
        "fine": 2000,
        "time": 20,
        "type": "Felony",
        "description": "The act of possessing a automatic weapon, explosive ordinance, improvised explosive, and any other weapon not sold within Los Santos. This law does not apply to Law Enforcement agencies transporting evidence",
        "title": "Possession of an Illegal Weapon",
        "chargeID": 8
    },
    {
        "fine": 2000,
        "time": 30,
        "type": "Felony",
        "description": "The act of intentionally setting fire or aiding in starting said fire to a structure or property without authorization from the property owner",
        "title": "Arson",
        "chargeID": 9
    },
    {
        "fine": 1200,
        "time": 15,
        "type": "Felony",
        "description": "The act of intentionally confining another person without their consent",
        "title": "Criminal Confinement",
        "chargeID": 10
    },
    {
        "fine": 2500,
        "time": 25,
        "type": "Felony",
        "description": "The act of using violence or threats in order to obtain property and/or money from an individual",
        "title": "Extortion",
        "chargeID": 11
    },
    {
        "fine": 500,
        "time": 15,
        "type": "Felony",
        "description": "The act of taking property from the possession of another person against their will, by means of force facilitated with a weapon.",
        "title": "Armed Robbery",
        "chargeID": 12
    },
    {
        "fine": 500,
        "time": 15,
        "type": "Felony",
        "description": "The act of entering and attempting to loot a property",
        "title": "Attempted Burglary",
        "chargeID": 13
    },
    {
        "fine": 1500,
        "time": 20,
        "type": "Felony",
        "description": "The act of entering and looting a property",
        "title": "Burglary",
        "chargeID": 14
    },
    {
        "fine": 750,
        "time": 20,
        "type": "Felony",
        "description": "The act of knowingly or intentionally removes another person, by fraud, enticement, force, or threat of force, from one place to another.",
        "title": "Kidnapping",
        "chargeID": 15
    },
    {
        "fine": 2500,
        "time": 30,
        "type": "Felony",
        "description": "The act of possessing more than the legal limit of a controlled substance or providing a controlled substance to another individual without a license to do so.",
        "title": "Possession of a CDS with Intent to Distribute",
        "chargeID": 16
    },
    {
        "fine": 500,
        "time": 15,
        "type": "Felony",
        "description": "A person who offers or gives a monetary gift, gratuity, valuable goods, or other reward to an individual in an attempt to influence their actions.",
        "title": "Bribery",
        "chargeID": 17
    },
    {
        "fine": 5000,
        "time": 150,
        "type": "Felony",
        "description": "The act of unintentionally ending the life of another person ",
        "title": "Involuntary Manslaughter",
        "chargeID": 18
    },
    {
        "fine": 500,
        "time": 30,
        "type": "Felony",
        "description": "A person who knowingly or intentionally touches another person in a rude, insolent, or angry manner that results in serious injury or committed with a deadly weapon.",
        "title": "Felony Battery",
        "chargeID": 19
    },
    {
        "fine": 250,
        "time": 10,
        "type": "Felony",
        "description": "The act of escaping custody of a law enforcement officer while being detained or in the process of being arrested.",
        "title": "Escaping From Custody",
        "chargeID": 20
    },
    {
        "fine": 250,
        "time": 20,
        "type": "Felony",
        "description": "The act of recklessly, knowingly, or intentionally performing an act that creates a substantial risk of bodily injury to another person",
        "title": "Criminal Recklessness",
        "chargeID": 21
    },
    {
        "fine": 500,
        "time": 15,
        "type": "Felony",
        "description": "The act of fleeing from a law enforcement officer while knowing said officer is attempting to pull them over in a marked patrol vehicle with its lights and/or sirens active.",
        "title": "Fleeing and Eluding",
        "chargeID": 22
    },
    {
        "fine": 500,
        "time": 15,
        "type": "Felony",
        "description": "A person who commits the theft of any motor vehicle",
        "title": "Grand Theft Auto",
        "chargeID": 23
    },
    {
        "fine": 1000,
        "time": 15,
        "type": "Felony",
        "description": "A person who knowingly or intentionally exerts unauthorized control over property of another person, with intent to deprive the other person of any part of its value or use of property costing over $1000.",
        "title": "Grand Theft",
        "chargeID": 24
    },
    {
        "fine": 250,
        "time": 10,
        "type": "Felony",
        "description": "A person who takes property from the possession of another against their will, by means of force or fear, such as through criminal threats, assault or battery.",
        "title": "Robbery",
        "chargeID": 25
    },
    {
        "fine": 4500,
        "time": 60,
        "type": "Felony",
        "description": "A person who knowingly and maliciously prevents or dissuades any witness or victim from attending or giving testimony at any trial, proceeding or inquiry, or attempts to alter any testimony or evidence.",
        "title": "Dissuading A Victim",
        "chargeID": 26
    },
    {
        "fine": 0,
        "time": 0,
        "type": "Felony",
        "description": "Those who knowingly and willfully participate in the commission of a crime may be charged to the full extent of the law regarding that crime, even if they did not directly commit it themselves. They must have played a role in committing the crime",
        "title": "Accessory",
        "chargeID": 27,
        "hidden": true,
    },
    {
        "fine": 0,
        "time": 0,
        "type": "Felony",
        "description": "The act of being disobedient to or disrespectful toward a court of law and its officers in the form of behavior that opposes or defies the authority, justice and dignity of the court.",
        "title": "Contempt of Court",
        "chargeID": 28
    },
    {
        "fine": 300,
        "time": 10,
        "type": "Misdemeanor",
        "description": "A person who avoids apprehension from an officer by non-vehicular means or resists apprehension by any physical means.",
        "title": "Resisting Arrest",
        "chargeID": 29
    },
    {
        "fine": 2000,
        "time": 25,
        "type": "Misdemeanor",
        "description": "A person who intentionally destroys or attempts to destroy evidence or attempts to create false evidence, conceal, or alter any evidence that can later potentially be used in a criminal investigation or court proceeding.",
        "title": "Tampering w/Evidence",
        "chargeID": 30
    },
    {
        "fine": 500,
        "time": 15,
        "type": "Misdemeanor",
        "description": "1. It is illegal for any person to point, hold, draw, or exhibit any firearm, whether capable of being fired or not in the presence of any other person, except in self-defense. <br><br>2. It is illegal to open carry a rifle or shotgun in public places or on a property in which the owner has not permitted you to do so.",
        "title": "Brandishing a Firearm",
        "chargeID": 31
    },
    {
        "fine": 750,
        "time": 10,
        "type": "Misdemeanor",
        "description": "A person who  fires a firearm in a grossly negligent manner which could result in injury or death.",
        "title": "Unlawful use of a Weapon",
        "chargeID": 32
    },
    {
        "fine": 500,
        "time": 10,
        "type": "Misdemeanor",
        "description": "A person who knowingly or intentionally exerts unauthorized control over property of another person, with intent to deprive the other person of any part of its value or use.",
        "title": "Theft",
        "chargeID": 33
    },
    {
        "fine": 200,
        "time": 15,
        "type": "Misdemeanor",
        "description": "A person who knowingly or intentionally touches another person in a rude, insolent, or angry manner.",
        "title": "Battery",
        "chargeID": 34
    },
    {
        "fine": 400,
        "time": 10,
        "type": "Misdemeanor",
        "description": "A person who intentionally destroys or damages any government-owned and maintained property causing monetary loss.",
        "title": "Destruction of Government Property",
        "chargeID": 35
    },
    {
        "fine": 800,
        "time": 20,
        "type": "Misdemeanor",
        "description": "1. A person who involved in an accident with a pedestrian, another car, or a fixed object, and leaves the scene without identifying himself or rendering aid to anyone who may need help <br><br>2. A person who does not stay on the scene to file a proper report with law enforcement.",
        "title": "Hit and Run",
        "chargeID": 36
    },
    {
        "fine": 500,
        "time": 10,
        "type": "Misdemeanor",
        "description": "1. A person who shows a clear and motivated attempt to prevent a government employee from conducting their duties. This would include interfering with a peace officer on the traffic stop. <br><br>2. A person who fails to comply with an officer's lawful orders.",
        "title": "Obstruction",
        "chargeID": 37
    },
    {
        "fine": 200,
        "time": 10,
        "type": "Misdemeanor",
        "description": "The act of possessing more than the legal limit of a controlled substance",
        "title": "Possession of CDS",
        "chargeID": 38
    },
    {
        "fine": 600,
        "time": 20,
        "type": "Misdemeanor",
        "description": "A person who intentionally and maliciously follows or harasses another person who has made it known that they do not consent to such following or harassment.",
        "title": "Stalking",
        "chargeID": 39
    },
    {
        "fine": 500,
        "time": 15,
        "type": "Misdemeanor",
        "description": "Driving in a willful or unjustifiable manner that disregards the safety and/or reckless abandon of consequences of actions.",
        "title": "Reckless Driving",
        "chargeID": 40
    },
    {
        "fine": 0,
        "time": 0,
        "type": "Misdemeanor",
        "description": "1. A person who, while being detained or under arrest by a peace officer, fails to provide a peace officer or other legal authority with the driver license or on an I.D. card or other identifiable information. <br><br>2. Any person who fails to provide identification shall be held in jail until he or she can be identified.",
        "title": "Failure to Identify",
        "chargeID": 41
    },
    {
        "fine": 400,
        "time": 15,
        "type": "Misdemeanor",
        "description": "A person who communicates to another that they will physically harm or kill such others, placing such others in a reasonable state of fear for their own safety.",
        "title": "Criminal Threats",
        "chargeID": 42
    },
    {
        "fine": 750,
        "time": 15,
        "type": "Misdemeanor",
        "description": "A person is guilty of trespassing when they enter a marked construction yard or a public place of business after they have been told they are trespassed. They knowingly travel along any railway by foot or vehicle when not authorized. They knowingly enter a residence and or dwelling of another person without owner consent.",
        "title": "Trespassing",
        "chargeID": 43
    },
    {
        "fine": 750,
        "time": 15,
        "type": "Misdemeanor",
        "description": "A person who attempts to, unlawfully, enter a vehicle with the purpose of theft by unlawful taking of that vehicle.",
        "title": "Attempted GTA",
        "chargeID": 44
    },
    {
        "fine": 500,
        "time": 10,
        "type": "Misdemeanor",
        "description": "A person who intentionally makes a false statement to a law enforcement officer or 911 dispatch message.",
        "title": "Filing a False Report",
        "chargeID": 45
    },
    {
        "fine": 500,
        "time": 10,
        "type": "Misdemeanor",
        "description": "A person who performs prank calls, fake calls, or tries to incite mayhem through the public government line.",
        "title": "Misuse of a Government Hotline",
        "chargeID": 46
    },
    {
        "fine": 1000,
        "time": 15,
        "type": "Misdemeanor",
        "description": "A person who takes or operates a vehicle without the owner’s consent, without the intent to deprive the owner of the vehicle permanently.",
        "title": "Joyriding",
        "chargeID": 47
    },
    {
        "fine": 1000,
        "time": 10,
        "type": "Misdemeanor",
        "description": "A person who has in their possession the appropriate combination of tools necessary to commit burglary, such as a lockpick, a tension bar along with a screwdriver, shimmy, or other appropriate items.",
        "title": "Possession of Burglary Tool",
        "chargeID": 48
    },
    {
        "fine": 800,
        "time": 60,
        "type": "Misdemeanor",
        "description": "A person who participates in an unsanctioned auto race which takes place on a public road, highway, or freeway.",
        "title": "Street Racing",
        "chargeID": 49
    },
    {
        "fine": 400,
        "time": 25,
        "type": "Misdemeanor",
        "description": "A person who operates a motor vehicle while under the influence of alcohol with a blood alcohol content greater than 0.08 BAC or while under the influence of legal or illegal drugs which impair the vehicle operator in such a way that it endangers the safety of others. LICENSE SUSPENSION",
        "title": "Driving Under the Influence",
        "chargeID": 50
    },
    {
        "fine": 500,
        "time": 10,
        "type": "Misdemeanor",
        "description": "Any person who unlawfully fights in a public place.",
        "title": "Disorderly Conduct",
        "chargeID": 51
    },
    {
        "fine": 750,
        "time": 15,
        "description": "No Driver or passenger shall drink or have an open container of any alcoholic beverage while a vehicle is operational.",
        "chargeID": 52,
        "title": "Open Container"
    },
    {
        "fine": 150,
        "time": 10,
        "type": "Misdemeanor",
        "description": "No person shall drive a motor vehicle at any time when that person’s driving privilege is suspended or revoked.",
        "title": "Driving w/a Suspended or Revoked License",
        "chargeID": 53
    },
    {
        "fine": 200,
        "time": 20,
        "type": "Misdemeanor",
        "description": "A person can not be under the influence of alcohol or any CDS in a public space where they could cause danger to themselves or someone else.",
        "title": "Public Intoxication",
        "chargeID": 54
    },
    {
        "fine": 200,
        "time": 0,
        "type": "Traffic",
        "description": "A person who operates a motor vehicle without a license on his or her person. ",
        "title": "Drivers License",
        "chargeID": 55
    },
    {
        "fine": 90,
        "time": 0,
        "type": "Traffic",
        "description": "The act of driving 5-10MPH over the posted speed limit",
        "title": "Speeding 5MPH-10MPH",
        "chargeID": 56
    },
    {
        "fine": 100,
        "time": 0,
        "type": "Traffic",
        "description": "The act of driving 10-20MPH over the posted speed limit",
        "title": "Speeding 10MPH-20MPH",
        "chargeID": 57
    },
    {
        "fine": 150,
        "time": 0,
        "type": "Traffic",
        "description": "The act of driving 21-30MPH over the posted speed limit",
        "title": "Speeding 21MPH-30MPH",
        "chargeID": 58
    },
    {
        "fine": 500,
        "time": 0,
        "type": "Traffic",
        "description": "The act of driving 30+MPH over the posted speed limit",
        "title": "Speeding 30MPH+",
        "chargeID": 59
    },
    {
        "fine": 100,
        "time": 0,
        "type": "Traffic",
        "description": "Failure to pull over to the side of the road and reduce speed when any emergency vehicle is active with lights on and/or sirens on. The driver must allow these emergency vehicles to pass. ",
        "title": "Failure to Yield to Emergency Vehicle",
        "chargeID": 60
    },
    {
        "fine": 500,
        "time": 15,
        "type": "Traffic",
        "description": "Driving in a willful or unjustifiable manner that disregards the safety and/or reckless abandon of consequences of actions.",
        "title": "Reckless Driving",
        "chargeID": 61
    },
    {
        "fine": 50,
        "time": 0,
        "type": "Traffic",
        "description": "Any amount of physical damage to the windshield that impairs vision may cause unsafe operation of the vehicle. This includes the lack of a windshield.",
        "title": "Broken Windshield",
        "chargeID": 62
    },
    {
        "fine": 150,
        "time": 0,
        "type": "Traffic",
        "description": "Operation of a Motor Vehicle on any public roadway without current and valid registration.",
        "title": "Unregistered Motor Vehicle",
        "chargeID": 63
    },
    {
        "fine": 250,
        "time": 0,
        "type": "Traffic",
        "description": "1. You must remain stopped until the traffic control devices turn green. <br><br>2. Right on red is permitted, after a complete stop and yielding to all oncoming traffic. The driver may then continue turning right, using caution.",
        "title": "Failure to Obey Traffic Control Devices",
        "chargeID": 64
    },
    {
        "fine": 150,
        "time": 0,
        "type": "Traffic",
        "description": "The driver of a vehicle shall not follow another vehicle more closely than is reasonable and prudent, having due regard for the speed of such vehicle and the traffic upon, and the condition of, the roadway.",
        "title": "Following Distance",
        "chargeID": 65
    },
    {
        "fine": 150,
        "time": 0,
        "type": "Traffic",
        "description": "A driver must come to a complete stop at the stop sign.",
        "title": "Failure to Stop at a Stop Sign",
        "chargeID": 66
    },
    {
        "fine": 100,
        "time": 0,
        "type": "Traffic",
        "description": "Fail to come to a complete stop before entering any establish roadway. This includes Intersections not marked with a red light, stop signs or stop line while be considered failure to yield.",
        "title": "Failure to yield right of way to traffic",
        "chargeID": 67
    },
    {
        "fine": 100,
        "time": 0,
        "type": "Traffic",
        "description": "Passing another vehicle by a shoulder, median, or solid lines. Passing must be completely made without interfering with safe operation of any approaching vehicle from the opposite direction. You can pass when it’s a dotted yellow line on your side of the road.",
        "title": "Illegal Passing",
        "chargeID": 68
    },
    {
        "fine": 100,
        "time": 0,
        "type": "Traffic",
        "description": "Performing a U-turn that is crosses lanes of traffic where a sign prohibits. Performing a turn at a stop sign or red light without coming to a complete stop, or failure to yield to pedestrians. Making a left-hand turn were signs or road marking posted prohibit such a turn.",
        "title": "Illegal turn/u-turn",
        "chargeID": 69
    },
    {
        "fine": 100,
        "time": 0,
        "type": "Traffic",
        "description": "You shall not go below the speed limit to impede or block the flow of traffic except when it is necessary to do so for safety or due to compliance with law enforcement instructions.",
        "title": "Impeding flow of traffic",
        "chargeID": 70
    },
    {
        "fine": 150,
        "time": 0,
        "type": "Traffic",
        "description": "Driving on the left side of the road against opposing traffic or driving opposing oneway traffic.",
        "title": "Driving while Opposing traffic",
        "chargeID": 71
    },
    {
        "fine": 200,
        "time": 0,
        "type": "Traffic",
        "description": "Any traffic violations committed at any time while driving or operating a Commercial Vehicle.",
        "title": "Commercial Moving or Traffic Violations",
        "chargeID": 72
    },
    {
        "fine": 50,
        "time": 0,
        "type": "Traffic",
        "description": "License plates are issued by the Department of Motor Vehicles for use upon a vehicle, they shall be attached to the vehicle for which they were issued.",
        "title": "Visible Plate",
        "chargeID": 73
    },
    {
        "fine": 300,
        "time": 0,
        "type": "Traffic",
        "description": "The vehicle has been damaged too heavily to be safe to drive to a repair shop.",
        "title": "Unroadworthy Vehicle",
        "chargeID": 74
    },
    {
        "fine": 75,
        "time": 0,
        "type": "Traffic",
        "description": "Failure to use headlights in low light conditions or headlights for visibility while on roads.",
        "title": "Driving without lights",
        "chargeID": 75
    },
    {
        "fine": 60,
        "time": 0,
        "type": "Traffic",
        "description": "Failure to have a working and illuminating headlights and/or taillights. This includes having a broken set of either headlight and/or taillights.",
        "title": "Tail Light or Headlight Out",
        "chargeID": 76
    },
    {
        "fine": 50,
        "time": 0,
        "type": "Traffic",
        "description": "Intentionally standing or waiting idly without apparent purpose, in area or on property with No Loitering signs. This only applies to those who are unwilling to vacate the area.",
        "title": "Loitering",
        "chargeID": 77
    },
    {
        "fine": 100,
        "time": 0,
        "type": "Traffic",
        "description": "It is unlawful to litter or cause to be littered in or upon public or private property. A person, firm, or corporation violating this section is guilty of an infraction.",
        "title": "Littering",
        "chargeID": 78
    },
    {
        "fine": 60,
        "time": 0,
        "type": "Traffic",
        "description": "Parking a vehicle where prohibited, ie Fire lanes, sidewalks, any area that is marked by red paint. This also includes parking  parking in a manner that could cause damage to property.",
        "title": "Illegally Parked Vehicle",
        "chargeID": 79
    },
    {
        "fine": 50,
        "time": 0,
        "type": "Traffic",
        "description": "Crosses a road without the use of a crosswalk.",
        "title": "Jaywalking",
        "chargeID": 80
    },
    {
        "fine": 0,
        "time": 0,
        "type": "Felony",
        "description": "the offense of willfully telling an untruth in a court after having taken an oath or affirmation..",
        "title": "Perjury",
        "chargeID": 81
    },
    {
        "fine": 1500,
        "time": 10,
        "type": "Misdemeanor",
        "description": "The possession of equipment issued by the state of San Andreas by an individual not employed by the state",
        "title": "Possession of Government Issued Equipment",
        "chargeID": 82
    },
    {
        "fine": 400,
        "time": 0,
        "type": "Misdemeanor",
        "description": "A person who intentionally destroys or damages any maintained property causing monetary loss.",
        "title": "Destruction of Property",
        "chargeID": 83
    },
]

injuries = [
]

function clone(obj) {
    if (null == obj || "object" != typeof obj) return obj;
    var copy = obj.constructor();
    for (var attr in obj) {
        if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];
    }
    return copy;
}

for (var item in charges) {
    if (item < 10000) {
        charges[Number(item) + 10000] = clone(charges[item]);
        charges[Number(item) + 10000].title += ' (Accessory)'

        charges[Number(item) + 20000] = clone(charges[item]);
        charges[Number(item) + 20000].title += ' (Accomplice)'
    } else {
        break;
    }
}

function ResetCharges(data, isEMS) {

    if(!isEMS) {
        charges = []
        for (var item in data) {
            if(!data[item]) break;
            if (item < 10000) {
                charges[Number(item)] = clone(data[item])
                charges[Number(item) + 10000] = clone(charges[item]);
                charges[Number(item) + 10000].title += ' (Accessory)'
        
                charges[Number(item) + 20000] = clone(charges[item]);
                charges[Number(item) + 20000].title += ' (Accomplice)'
            } else {
                break;
            }
        }
    } else {
        injuries = []
        for (var item in data) {
            if(!data[item]) break;
            if (item < 10000) {
                injuries[Number(item)] = clone(data[item])
                injuries[Number(item) + 10000] = clone(injuries[item]);
                injuries[Number(item) + 10000].title += ' (Accessory)'
        
                injuries[Number(item) + 20000] = clone(injuries[item]);
                injuries[Number(item) + 20000].title += ' (Accomplice)'
            } else {
                break;
            }
        }
    }
}

function OpenCharges(pReportId, pCID) {
    let page = $('#mdt_content');
    target_person = pCID

    $('#profile_active').html('')
    page.html(``)

    page.append(`
    <div id = "charges">
        <div class="input_container" id = "charges_searcher">
            <input type="text" class="input" placeholder="Search Charges" id = "charges_search">
            <img src="img/person.png" id="input_img3">
        </div>
    </div>
    <br>
    `)

    LoadCharges(page, $('#charges_search').val(), pReportId, pCID)
    $('#charges_search').on('input', function() {
        LoadCharges(page, $('#charges_search').val(), pReportId, pCID)
    })

    /* if (pReportId) {
        page.append(`
            <div id = "charge_under"></div>
        `)
    } */
}

function LoadCharges(page, string, pReportId, pCID) {

    $('.charge_container').each(function() {
        $(this).remove()
    })

    let list = duty != 'EMS' ? charges : injuries;

    for(var item of list) {
        if (!item) break;
        if (item.hidden) continue;
        if (item.type == 'Felony' && item.title.toLowerCase().includes((string || "").toLowerCase())) {
                page.append(`
                <div class = "charge_container" type = "${item.type}" title = "${item.title} : ${item.description}" charge = ${item.chargeID}>
                    <p id = "charge_name">${item.title}</p>
                    <hr>
                    <p id = "charge_time">${item.time} Months</p>
                    <p id = "charge_fine">$${item.fine}</p>
                </div>
            `)
        }
    }

    for(var item of list) {
        if (!item) break;
        if (item.hidden) continue;
        if (item.type == 'Misdemeanor' && item.title.toLowerCase().includes((string || "").toLowerCase())) {
                page.append(`
                <div class = "charge_container" type = "${item.type}" title = "${item.title} : ${item.description}" charge = ${item.chargeID}>
                    <p id = "charge_name">${item.title}</p>
                    <hr>
                    <p id = "charge_time">${item.time} Months</p>
                    <p id = "charge_fine">$${item.fine}</p>
                </div>
            `)
        }
    }

    for(var item of list) {
        if (!item) break;
        if (item.hidden) continue;
        if (item.type == 'Traffic' && item.title.toLowerCase().includes((string || "").toLowerCase())) {
                page.append(`
                <div class = "charge_container" type = "${item.type}" title = "${item.title} : ${item.description}" charge = ${item.chargeID}>
                    <p id = "charge_name">${item.title}</p>
                    <hr>
                    <p id = "charge_time">${item.time} Months</p>
                    <p id = "charge_fine">$${item.fine}</p>
                </div>
            `)
        }
    }

    $('.charge_container').tooltip({
        tooltipClass: "tooltip3",
        position: {
            my: "bottom", // the "anchor point" in the tooltip element
            at: "top", // the position of that anchor point relative to selected element
        }
    }).click(function(ev) {
        if (pCID) {

            if (duty == 'EMS') {
                AddCharge(pReportId, pCID, $(this).attr('charge'))
                return;
            }

            $('.chargelist').remove()
            if (ev.clientY / screen.height > 0.8) {
                page.append(`
                    <div class = "chargelist" style = "position:fixed; bottom: 1em; left:${$(this).offset().left}px; width: 15em; height:auto; background-color:var(--main-bg); border: 0.1em solid var(--main-lighter);">
                        <button class = "chargeerbutton" chargeid = ${Number($(this).attr('charge'))} >${charges[Number($(this).attr('charge'))].title}</button>
                        <button class = "chargeerbutton" chargeid = ${Number($(this).attr('charge')) + 10000} >${charges[Number($(this).attr('charge')) + 10000].title}</button>
                        <button class = "chargeerbutton" chargeid = ${Number($(this).attr('charge')) + 20000} >${charges[Number($(this).attr('charge')) + 20000].title}</button>
                    </div>
                `)
            } else {
                page.append(`
                <div class = "chargelist" style = "position:fixed; top: calc(${ev.clientY}px + 1em); left:${$(this).offset().left}px; width: 15em; height:auto; background-color:var(--main-bg); border: 0.1em solid var(--main-lighter);">
                        <button class = "chargeerbutton" chargeid = ${Number($(this).attr('charge'))} >${charges[Number($(this).attr('charge'))].title}</button>
                        <button class = "chargeerbutton" chargeid = ${Number($(this).attr('charge')) + 10000} >${charges[Number($(this).attr('charge')) + 10000].title}</button>
                        <button class = "chargeerbutton" chargeid = ${Number($(this).attr('charge')) + 20000} >${charges[Number($(this).attr('charge')) + 20000].title}</button>
                    </div>
                `)
            }
           
            $('.chargeerbutton').click(function() {
                AddCharge(pReportId, pCID, $(this).attr('chargeid'))
            })
        }
    })

    page.scroll(function() {
        $('.chargelist').remove()
    })
}

async function AddCharge(pReportId, pCID, pCharge) {
    let ret = await Get('AddCharge', {
        report: pReportId,
        cid: pCID,
        charge: pCharge
    });
    await OpenReports()
    RefreshReport(pReportId)
}

setTimeout(() => {
    if (typeof TriggerEvent != 'undefined') {
        TriggerEvent('SendCharges', charges, injuries)
    }
}, 1000);

function ChargeEditor() {
    let page = $('#mdt_content');
    $('#profile_active').html('')
    page.html(`

    <button class = "addcharge">Add New Charge</button>
    <table>
        <tr>
            <th>Active</th>
            <th>ID</th>
            <th>Title</th>
            <th>Description</th>
            <th>Time</th>
            <th>Fine</th>
            <th>Edit</th>
        </tr>
    </table>`)

    let list = duty != 'EMS' ? charges : injuries;

    for(var item of list) {
        if(!item) break;
        page.find('table').append(`
            <tr>
                <td><input type = "checkbox" class = "tickbox" charge = ${item.chargeID} ${!item.hidden ? "checked" : ''}></td>
                <td>${item.chargeID}</td>
                <td>${item.title}</td>
                <td class = "description">${item.description}</td>
                <td>${item.time}</td>
                <td>${item.fine}</td>
                <td><i class="fas fa-external-link-alt chargeEditor" charge = ${item.chargeID}></i></td>
            </tr>
        `)
    }

    $('.addcharge').click(function() {
        page.append(`
            <div id = "chargeedit">
                <div class="input_container" id = "profiles_searcher">
                    <input type="text" class="input2 pTitle" placeholder="Charge Title" id = "profiles_search" >
                </div>

                <div class="input_container" id = "profiles_searcher">
                    <input type="text" class="input2 pDescription" placeholder="Charge Description" id = "profiles_search" >
                </div>

                <div class="input_container" id = "profiles_searcher">
                    <input type="text" class="input2 pTime" placeholder="Charge Time" id = "profiles_search">
                </div>

                <div class="input_container" id = "profiles_searcher">
                    <input type="text" class="input2 pFine" placeholder="Charge Fine" id = "profiles_search">
                </div>

                <div class="input_container" id = "profiles_searcher">
                    <select name = "Charge Type" class="input2 pType" id = "profiles_search">
                        <option value="Traffic">Traffic</option>
                        <option value="Misdemeanor">Misdemeanor</option>
                        <option value="Felony">Felony</option>
                    </select>
                </div>

                <button id = "helper_confirm_yes" style = "position:absolute;bottom:1em;top:auto;">Confirm</button>
                <button id = "helper_confirm_no" style = "position:absolute;bottom:1em;top:auto;">Deny</button>
            </div>
        `)

        $('#helper_confirm_yes').click(async function() {
            let data = {
                title : $('.pTitle').val(),
                description : $('.pDescription').val(),
                time : $('.pTime').val(),
                fine : $('.pFine').val(),
                type : $('.pType').val()
            }

            $('#chargeedit').remove()
            Loading()
            let val = await Get('NewCharge', {data: data})
            if (val) {
                list[val[0]] = val[1]
                ResetCharges(list)
            }
            StopLoading()
            ChargeEditor()
        })

        $('#helper_confirm_no').click(function() {
            $('#chargeedit').remove()
        })
    })

    $('.tickbox').click(async function() {
        let charge = list[Number($(this).attr('charge'))]
        let data = {
            chargeID: charge.chargeID,
            checked: $(this).attr('checked')
        }

        console.log(JSON.stringify(data))
        Loading()
        let val = await Get('SaveChargeActive', {data: data})
        if (val) {
            list[val[0]] = val[1]
            ResetCharges(list)
        }
        StopLoading()
        ChargeEditor()
    })

    $('.chargeEditor').click(function() {
        let charge = list[Number($(this).attr('charge'))]
        page.append(`
            <div id = "chargeedit">
                <div class="input_container" id = "profiles_searcher">
                    <input type="text" class="input2 pTitle" placeholder="Charge Title" id = "profiles_search" value = "${charge.title}">
                </div>

                <div class="input_container" id = "profiles_searcher">
                    <input type="text" class="input2 pDescription" placeholder="Charge Description" id = "profiles_search" value = "${charge.description}">
                </div>

                <div class="input_container" id = "profiles_searcher">
                    <input type="text" class="input2 pTime" placeholder="Charge Time" id = "profiles_search"  value = "${charge.time}">
                </div>

                <div class="input_container" id = "profiles_searcher">
                    <input type="text" class="input2 pFine" placeholder="Charge Fine" id = "profiles_search"  value = "${charge.fine}">
                </div>

                <div class="input_container" id = "profiles_searcher">
                    <select name = "Charge Type" class="input2 pType" id = "profiles_search">
                        <option value="Traffic">Traffic</option>
                        <option value="Misdemeanor">Misdemeanor</option>
                        <option value="Felony">Felony</option>
                    </select>
                </div>

                <button id = "helper_confirm_yes" style = "position:absolute;bottom:1em;top:auto;">Confirm</button>
                <button id = "helper_confirm_no" style = "position:absolute;bottom:1em;top:auto;">Deny</button>
            </div>
        `)

        $('.pType').val(charge.type)

        $('#helper_confirm_yes').click(async function() {
            let data = {
                chargeID: charge.chargeID,
                title : $('.pTitle').val(),
                description : $('.pDescription').val(),
                time : $('.pTime').val(),
                fine : $('.pFine').val()
            }

            $('#chargeedit').remove()
            Loading()
            let val = await Get('SaveCharge', {data: data})
            if (val) {
                list[val[0]] = val[1]
                ResetCharges(list)
            }
            StopLoading()
            ChargeEditor()
        })

        $('#helper_confirm_no').click(function() {
            $('#chargeedit').remove()
        })
    })
}